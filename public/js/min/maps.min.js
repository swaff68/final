function initialize(){geocoder=new google.maps.Geocoder;var e=new google.maps.LatLng(40.0457966,-105.1249414),o={zoom:10,center:e,mapTypeId:google.maps.MapTypeId.TERRAIN};map=new google.maps.Map(document.getElementById("map-canvas"),o),google.maps.event.addListener(map,"click",function(e){addMarker(e.latLng)}),updateMarkers()}function addMarker(e,o){var a=new google.maps.Marker({position:e,map:map,icon:o});google.maps.event.addListener(a,"dblclick",function(){a.setMap(null)}),markers.push(a)}function setAllMap(e){for(var o=0;o<markers.length;o++)markers[o].setMap(e)}function clearMarkers(){setAllMap(null)}function showMarkers(){setAllMap(map)}function deleteMarkers(){clearMarkers(),markers=[]}function codeAddress(){var e=document.getElementById("address").value;geocoder.geocode({address:e},function(e,o){if(o==google.maps.GeocoderStatus.OK){map.setCenter(e[0].geometry.location);{new google.maps.Marker({map:map,position:e[0].geometry.location})}}else alert("Geocode was not successful for the following reason: "+o)})}var map,markers=[],geocoder,updateMarkers=function(){deleteMarkers(),$.get("/requestMarkers",function(e){var o=_.groupBy(e,function(e){return e.groupId});console.log(o);for(var a in o){var r=new google.maps.LatLng(o[a][0].lat,o[a][0].long),n="./pics/clothes.png",t=null,s="./pics/pets.png",p="./pics/transport.png",l="./pics/lodge.png",g="./pics/meals.png",i="./pics/water.png",c="./pics/multiRequest.png",d=t;o[a].length>1?d=c:("clothing"===o[a][0].requestType&&(d=n),"transportation"===o[a][0].requestType&&(d=p),"lodging"===o[a][0].requestType&&(d=l),"meals"===o[a][0].requestType&&(d=g),"pets"===o[a][0].requestType&&(d=s),"water"===o[a][0].requestType&&(d=i)),addMarker(r,d)}console.log(e)})};google.maps.event.addDomListener(window,"load",initialize);