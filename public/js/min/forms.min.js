var test=function(){console.log("test ran!")};$(function(){$.get("/reliefRequets",function(e){for(requestType in e){var t=$('<tr><td><input type="checkbox" class="water-request-checkbox"></td></tr>');$(".water-table").append(t)}}),$.get("/reliefStatus",function(e){for(requestType in e){console.log(requestType);var t=$('<div class="col-md-2 '+e[requestType].id+'"><div>'+e[requestType].displayName+'</div><div>  <i class="fa '+e[requestType].icon+'"></i><div>Current Requests</div><div class="curReq">'+e[requestType].requests+'</div><div>Quantity Still Needed</div><div class="quanStillNeeded">'+e[requestType].quantity+"</div></div>");$(".status-table").append(t)}console.log(e)}),$("#reqForm").on("submit",function(e){e.preventDefault(),console.log("test");var t=$("#first-name").val(),a=$("#last-name").val(),o=$("#org-name").val(),n=$("#inputEmail1").val(),l=$("#phone-number").val(),s=$("#address").val(),r=$(".water-checkbox").is(":checked"),i=$(".meals-checkbox").is(":checked"),c=$(".lodge-checkbox").is(":checked"),u=$(".pets-checkbox").is(":checked"),m=$(".transport-checkbox").is(":checked"),d=$(".clothes-checkbox").is(":checked"),p=$("#water-quantity").val(),g=$("#water-comments").val(),q=$("#meals-quantity").val(),v=$("#meals-comments").val(),y=+$("#lodge-quantity").val(),h=$("#lodge-comments").val(),f=$("#pets-quantity").val(),x=$("#pets-comments").val(),N=$("#transport-quantity").val(),b=$("#transport-comments").val(),S=$("#clothes-quantity").val(),k=$("#clothes-comments").val();geocoder.geocode({address:s},function(e,w){if(w==google.maps.GeocoderStatus.OK){test(),map.setCenter(e[0].geometry.location);var R="./pics/clothes.png",C=null,T="./pics/pets.png",Q="./pics/transport.png",I="./pics/lodge.png",O="./pics/meals.png",M="./pics/water.png",D="./pics/multiRequest.png",E=C,F=0;test(),d===!0&&S>0&&(E=R,F++),m===!0&&N>0&&(E=Q,F++),c===!0&&y>0&&(E=I,F++),i===!0&&q>0&&(E=O,F++),u===!0&&f>0&&(E=T,F++),r===!0&&p>0&&(E=M,F++),F>1&&(console.log(F),E=D);{new google.maps.Marker({map:map,icon:E,position:e[0].geometry.location})}console.log(e);var G={lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()};console.log("this is water",r),console.log("this is meals",i);var B=(+new Date).toString(36);r===!0&&$.post("/aidSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,address:s,lat:G.lat,"long":G.lng,requestType:"water",quantityRequested:p,requestComments:g,groupId:B},function(){var e=$(".water .curReq").text();e=+e+1,$(".water .curReq").text(e);var t=$(".water .quanStillNeeded").text();t=+t+y,$(".water .quanStillNeeded").text(t)}),i===!0&&$.post("/aidSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,address:s,lat:G.lat,"long":G.lng,requestType:"meals",quantityRequested:q,requestComments:v,groupId:B},function(){var e=$(".meals .curReq").text();e=+e+1,$(".meals .curReq").text(e);var t=$(".meals .quanStillNeeded").text();t=+t+y,$(".meals .quanStillNeeded").text(t)}),u===!0&&$.post("/aidSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,address:s,lat:G.lat,"long":G.lng,requestType:"pets",quantityRequested:f,requestComments:x,groupId:B},function(){var e=$(".pet-boarding .curReq").text();e=+e+1,$(".pet-boarding .curReq").text(e);var t=$(".pet-boarding .quanStillNeeded").text();t=+t+y,$(".pet-boarding .quanStillNeeded").text(t)}),c===!0&&$.post("/aidSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,address:s,lat:G.lat,"long":G.lng,requestType:"lodging",quantityRequested:y,requestComments:h,groupId:B},function(){var e=$(".lodging .curReq").text();e=+e+1,$(".lodging .curReq").text(e);var t=$(".lodging .quanStillNeeded").text();t=+t+y,$(".lodging .quanStillNeeded").text(t)}),m===!0&&$.post("/aidSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,address:s,lat:G.lat,"long":G.lng,requestType:"transportation",quantityRequested:N,requestComments:b,groupId:B},function(){var e=$(".transportation .curReq").text();e=+e+1,$(".transportation .curReq").text(e);var t=$(".transportation .quanStillNeeded").text();t=+t+y,$(".transportation .quanStillNeeded").text(t)}),d===!0&&$.post("/aidSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,address:s,lat:G.lat,"long":G.lng,requestType:"clothing",quantityRequested:S,requestComments:k,groupId:B},function(){var e=$(".clothing .curReq").text();e=+e+1,$(".clothing .curReq").text(e);var t=$(".clothing .quanStillNeeded").text();t=+t+y,$(".clothing .quanStillNeeded").text(t)}),$("#myModal").fadeOut(),$(".modal-backdrop").fadeOut()}else alert("Geocode was not successful for the following reason: "+w)})}),$(".checkbox label input").on("change",function(){$(this).prop("checked")===!0?$(this).parent().siblings("input, textarea, table").show():$(this).parent().siblings("input, textarea, table").hide()}),$("#contForm").on("submit",function(e){e.preventDefault(),console.log("test cont");var t=$("#first-name-cont").val(),a=$("#last-name-cont").val(),o=$("#org-name-cont").val(),n=$("#inputEmail1-cont").val(),l=$("#phone-number-cont").val(),s=$("#water-quantity-cont").val(),r=$("#water-comments-cont").val(),i=$("#meals-quantity-cont").val(),c=$("#meals-comments-cont").val(),u=$("#lodge-quantity-cont").val(),m=$("#lodge-comments-cont").val(),d=$("#pets-quantity-cont").val(),p=$("#pets-comments-cont").val(),g=$("#transport-quantity-cont").val(),q=$("#transport-comments-cont").val(),v=$("#clothes-quantity-cont").val(),y=$("#clothes-comments-cont").val();console.log(t,a,o,n,l,s,r,i,c,u,m,d,p,g,q,v,y),$.post("/contSubmit",{fName:t,lName:a,orgName:o,email:n,phone:l,waterQuantity:s,waterComments:r,mealsQuantity:i,mealsComments:c,lodgeQuantity:u,lodgeComments:m,petsQuantity:d,petsComments:p,transportQuantity:g,transportComments:q,clothesQuantity:v,clothesComments:y},function(e){console.log("data",e)}),$("#myModal1").fadeOut(),$(".modal-backdrop").fadeOut()}),$("#metricsBtn").one("click",function(){new Morris.Line({element:"myfirstchart",data:[{year:"2008",value:20},{year:"2009",value:10},{year:"2010",value:5},{year:"2011",value:5},{year:"2012",value:20}],xkey:"year",ykeys:["value"],labels:["Value"]})})});