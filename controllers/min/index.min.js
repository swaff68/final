var Request=require("../models/request.js"),Contribution=require("../models/contribute.js"),indexController={index:function(t,e){e.render("index")},requestMarkers:function(t,e){Request.find({},function(t,o){e.send(o)})},reliefStatus:function(t,e){console.log("Request called");var o={clothes:{displayName:"Clothing",icon:" fa fa-group fa-icon",requests:0,quantity:0},lodge:{displayName:"Lodging",icon:" fa fa-home fa-icon",requests:0,quantity:0},meals:{displayName:"Meals",icon:" fa fa-cutlery fa-icon",requests:0,quantity:0},pets:{displayName:"Pet Boarding",icon:" fa fa-paw fa-icon",requests:0,quantity:0},transport:{displayName:"Transportation",icon:" fa fa-car fa-icon",requests:0,quantity:0},water:{displayName:"Bottles of Water",icon:" fa fa-tint fa-icon",requests:0,quantity:0}};Request.find({},function(t,n){for(var a=0;a<n.length;a++)n[a].waterQuantity>0&&(o.water.requests+=1,o.water.quantity+=n[a].waterQuantity),n[a].clothesQuantity>0&&(o.clothes.requests+=1,o.clothes.quantity+=n[a].clothesQuantity),n[a].petsQuantity>0&&(o.pets.requests+=1,o.pets.quantity+=n[a].petsQuantity),n[a].lodgeQuantity>0&&(o.lodge.requests+=1,o.lodge.quantity+=n[a].lodgeQuantity),n[a].mealsQuantity>0&&(o.meals.requests+=1,o.meals.quantity+=n[a].mealsQuantity),n[a].transportQuantity>0&&(o.transport.requests+=1,o.transport.quantity+=n[a].transportQuantity);console.log(o),e.send(o)})},aidSubmit:function(t,e){console.log(t.body.fName,t.body.lName,t.body.orgName,t.body.email,t.body.phone,t.body.address,t.body.lat,t.body.long,t.body.waterQuantity,t.body.waterComments,t.body.mealsQuantity,t.body.mealsComments,t.body.lodgeQuantity,t.body.lodgeComments,t.body.petsQuantity,t.body.petsComments,t.body.transportQuantity,t.body.transportComments,t.body.clothesQuantity,t.body.clothesComments),e.send("success");var o=new Request(t.body);o.save(function(t){t?e.send(500,"ERROR"):e.render("thankyou",{newrequest:o})})},contSubmit:function(t,e){console.log(t.body.fName,t.body.lName,t.body.orgName,t.body.email,t.body.phone,t.body.waterQuantity,t.body.waterComments,t.body.mealsQuantity,t.body.mealsComments,t.body.lodgeQuantity,t.body.lodgeComments,t.body.petsQuantity,t.body.petsComments,t.body.transportQuantity,t.body.transportComments,t.body.clothesQuantity,t.body.clothesComments),e.send("success");var o=new Contribution(t.body);o.save(function(t){t?e.send(500,"ERROR"):e.render("thanks",{newcontribution:o})})}};module.exports=indexController;