var Request=require("../models/request.js"),Contribution=require("../models/contribute.js"),indexController={index:function(e,t){t.render("index")},requestMarkers:function(e,t){Request.find({},function(e,n){t.send(n)})},reliefStatus:function(e,t){console.log("Request called");var n={clothes:{displayName:"Clothing",id:"clothing",icon:" fa fa-group fa-icon",requests:0,quantity:0},lodge:{displayName:"Lodging",id:"lodging",icon:" fa fa-home fa-icon",requests:0,quantity:0},meals:{displayName:"Meals",id:"meals",icon:" fa fa-cutlery fa-icon",requests:0,quantity:0},pets:{displayName:"Pet Boarding",id:"pet-boarding",icon:" fa fa-paw fa-icon",requests:0,quantity:0},transport:{displayName:"Transportation",id:"transportation",icon:" fa fa-car fa-icon",requests:0,quantity:0},water:{displayName:"Bottles of Water",id:"water",icon:" fa fa-tint fa-icon",requests:0,quantity:0}};Request.find({},function(e,s){for(var a=0;a<s.length;a++)"water"===s[a].requestType&&s[a].quantityRequested>0&&(n.water.requests+=1,n.water.quantity+=s[a].quantityRequested),"clothing"===s[a].requestType&&s[a].quantityRequested>0&&(n.clothes.requests+=1,n.clothes.quantity+=s[a].quantityRequested),"pets"===s[a].requestType&&s[a].quantityRequested>0&&(n.pets.requests+=1,n.pets.quantity+=s[a].quantityRequested),"lodging"===s[a].requestType&&s[a].quantityRequested>0&&(n.lodge.requests+=1,n.lodge.quantity+=s[a].quantityRequested),"meals"===s[a].requestType&&s[a].quantityRequested>0&&(n.meals.requests+=1,n.meals.quantity+=s[a].quantityRequested),"transportation"===s[a].requestType&&s[a].quantityRequested>0&&(n.transport.requests+=1,n.transport.quantity+=s[a].quantityRequested);console.log(n),t.send(n)})},aidSubmit:function(e,t){var n=new Request(e.body);n.save(function(e,n){e?t.send(500,"ERROR"):t.send(n)})},contSubmit:function(e,t){console.log(e.body.fName,e.body.lName,e.body.orgName,e.body.email,e.body.phone,e.body.waterQuantity,e.body.waterComments,e.body.mealsQuantity,e.body.mealsComments,e.body.lodgeQuantity,e.body.lodgeComments,e.body.petsQuantity,e.body.petsComments,e.body.transportQuantity,e.body.transportComments,e.body.clothesQuantity,e.body.clothesComments),t.send("success");var n=new Contribution(e.body);n.save(function(e){e?t.send(500,"ERROR"):t.render("thanks",{newcontribution:n})})}};module.exports=indexController;